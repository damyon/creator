<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>WebGL with Rust + WebAssembly</title>

        <link rel="stylesheet" href="style.css" />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
        />
        <script type="module" src="creator.js"></script>
        <script type="module" src="main.js"></script>
    </head>
    <body>
        <canvas id="scene" tabindex="0" width="800" height="800" tabindex="1" autofocus> </canvas>

        <div
            id="instructions"
            style="
                box-shadow: 2px 2px 4px #000000;
                position: absolute;
                left: calc(50% - 250px);
                top: 30%;
                width: 500px;
                padding: 2rem;
            "
            popover
        >
            <h2>Controls</h2>
            <h3>Mouse</h3>
            <div>Click and drag the mouse to rotate the camera.</div>
            <div>Scroll the mouse wheel to make the selection bigger or smaller.</div>
            <h3>Keyboard</h3>
            <div>Use <b>WASD</b> keys or the arrow keys to move the camera left and right, forwards and backwards.</div>
            <div>Use <b>E</b> and <b>C</b> keys to move the camera up and down.</div>
            <div>
                Use the <b>arrow</b> keys on the numpad to move the selection left and right, forwards and backwards.
            </div>
            <div>Use the <b>9</b> and <b>3</b> keys on the numpad to move the selection up and down.</div>
            <div>Use the <b>n</b> key to toggle the noise property of the material.</div>
            <div>Use the <b>f</b> key to toggle the fluid property of the material.</div>
            <div>Use the <b>spacebar</b> to toggle the selected cubes on or off.</div>
            <div>Use <b>T</b> to toggle the selection shape.</div>
        </div>
        <input
            id="name"
            type="text"
            class="widget"
            placeholder="Scene name..."
            style="
                position: absolute;
                left: 10px;
                top: 10px;
                font-size: 1em;
                font-weight: 700;
                cursor: text;
                border: 2px solid black;
                background: white;
                color: black;
                border-radius: 4px;
            "
        />
        <select
            id="scene-list"
            class="widget"
            style="
                position: absolute;
                left: 310px;
                top: 10px;
                font-size: 1em;
                font-weight: 700;
                cursor: text;
                border: 2px solid black;
                background: white;
                color: black;
                border-radius: 4px;
            "
        >
            <option>None</option>
        </select>
        <div
            class="widget"
            style="
                position: absolute;
                left: 10px;
                top: 70px;
                width: 140px;
                color: white;
                border: none;
                border-radius: 20px;
            "
        >
            <input type="color" id="color" title="Color" value="#CCCCCC" style="float: left" />
            <input
                type="range"
                id="alpha"
                min="0.0"
                max="1.0"
                step="0.05"
                style="float: left; padding: 5px; width: 60px; margin-left: 20px; accent-color: white"
                value="1.0"
                title="Opacity"
            />
        </div>
        <button id="flat" class="widget" title="Flat" style="position: absolute; left: 10px; top: 130px; border: none">
            <span style="background: white; width: 30px; height: 30px; display: inline-block; border-radius: 50%;"></i>
        </button>
        <button
            id="noise"
            class="widget"
            title="Random Noise"
            style="position: absolute; left: 10px; top: 130px; border: none; display: none"
        >
            <svg style="width: 30px; height: 30px; border-radius: 50%;"
                viewBox="0 0 30 30" xmlns='http://www.w3.org/2000/svg'>
              <filter id='noiseFilter'>
                <feTurbulence
                  type='fractalNoise'
                  baseFrequency='0.65'
                  numOctaves='3'
                  stitchTiles='stitch' />
              </filter>

              <rect width='100%' height='100%' filter='url(#noiseFilter)' />
            </svg>
        </button>
        <button id="solid" title="Solid material" class="widget" style="position: absolute; left: 10px; top: 190px; border: none">
            <span style="border: 2px solid white; width: 26px; height: 26px; display: inline-block; border-radius: 50%;"></i>
        </button>
        <button
            id="fluid"
            title="Fluid material"
            class="widget"
            style="position: absolute; left: 10px; top: 190px; border: none; display: none"
        >
            <svg class="ripple" style="width: 30px; height: 30px; border-radius: 50%;"
                viewBox="0 0 30 30" xmlns='http://www.w3.org/2000/svg'>
                <circle cx="15" cy="15" r="14" fill="none" stroke="#fff" stroke-width="2" />
                <circle cx="15" cy="15" r="14" fill="none" stroke="#fff" stroke-width="2" />
                <circle cx="15" cy="15" r="14" fill="none" stroke="#fff" stroke-width="2" />
              </svg>
              <style>
              .ripple circle {
                transform-origin: center;
                animation: ripple 2s infinite cubic-bezier(0.23, 1, 0.32, 1);
                transform: scale(1);
                opacity: 0;
              }

              .ripple circle:nth-child(2) {
                animation-delay: 0.5s;
                transform: scale(1);
                opacity: 0;
              }
              .ripple circle:nth-child(3) {
                animation-delay: 1s;
                transform: scale(1);
                opacity: 0;
              }

              @keyframes ripple {
                0% {
                  transform: scale(0);
                  opacity: 1;
                }
                100% {
                  transform: scale(1);
                  opacity: 0;
                }
              }</style>
        </button>
        <button id="sphere" title="Sphere" class="widget" style="position: absolute; left: 10px; top: 250px; border: none">
            <i class="bi-globe"></i>
        </button>
        <button
            id="cube"
            title="Cube"
            class="widget"
            style="position: absolute; left: 10px; top: 250px; border: none; display: none"
        >
            <i class="bi-box"></i>
        </button>
        <button
            id="square-xz"
            title="Square XZ"
            class="widget"
            style="position: absolute; left: 10px; top: 250px; border: none; display: none"
        >
            <span style="background: white; width: 32px; height: 12px; margin-top: 20px; display: inline-block;"></i>
        </button>
        <button
            id="square-xy"
            title="Square XY"
            class="widget"
            style="position: absolute; left: 10px; top: 250px; border: none; display: none"
        >
            <span style="background: white; width: 12px; height: 32px; margin-right: 20px; display: inline-block;"></i>
        </button>
        <button
            id="square-yz"
            title="Square YZ"
            class="widget"
            style="position: absolute; left: 10px; top: 250px; border: none; display: none"
        >
            <span style="background: white; width: 12px; height: 32px; margin-left: 20px; display: inline-block;"></i>
        </button>
        <button
            id="circle-xz"
            title="Circle XZ"
            class="widget"
            style="position: absolute; left: 10px; top: 250px; border: none; display: none"
        >
            <span style="background: white; width: 32px; height: 12px; margin-top: 20px; display: inline-block; border-radius: 50%;"></i>
        </button>
        <button
            id="circle-xy"
            title="Circle XY"
            class="widget"
            style="position: absolute; left: 10px; top: 250px; border: none; display: none"
        >
            <span style="background: white; width: 12px; height: 32px; margin-right: 20px; display: inline-block; border-radius: 50%;"></i>
        </button>
        <button
            id="circle-yz"
            title="Circle YZ"
            class="widget"
            style="position: absolute; left: 10px; top: 250px; border: none; display: none"
        >
            <span style="background: white; width: 12px; height: 32px; margin-left: 20px; display: inline-block; border-radius: 50%;"></i>
        </button>

        <button id="grid-visible" title="Grid visible" class="widget" style="position: absolute; left: 10px; top: 310px; border: none">
            <i class="bi-grid-3x3"></i>
        </button>
        <button id="grid-hidden" title="Grid hidden" class="widget" style="position: absolute; display: none; left: 10px; top: 310px; border: none">
            <i class="bi-app"></i>
        </button>

        <button id="load" title="Load..." class="widget" style="position: absolute; left: 10px; top: 370px; border: none">
            <i class="bi-arrow-clockwise"></i>
        </button>
        <button id="save" title="Save" class="widget" style="position: absolute; left: 10px; top: 430px; border: none">
            <i class="bi-floppy"></i>
        </button>
        <button id="delete" title="Delete" class="widget" style="position: absolute; left: 10px; top: 490px; border: none">
            <i class="bi-trash"></i>
        </button>
        <button
            title="Help"
            popovertarget="instructions"
            class="widget"
            style="border: none; position: absolute; left: 10px; bottom: 10px"
        >
            <i class="bi-question-circle"></i>
        </button>
    </body>
</html>
